{
	"info": {
		"_postman_id": "clockwise-complete-v2",
		"name": "ClockWise API - Complete Collection (Updated)",
		"description": "# ClockWise API - Colecci√≥n Completa Actualizada\n\n## Sistema de N√≥mina con FLSA Tip Credit Compliance (NY State)\n\n### üéØ Flujo Completo End-to-End:\n\n**FASE 0: Super Admin (Requerido)**\n1. Super Admin Login ‚Üí Obtener token para registrar businesses\n\n**FASE 1: Setup de Business**\n2. Register Business (con Super Admin token)\n3. Business Login ‚Üí Obtener token para operaciones\n4. **NUEVO**: Configurar Tip Credit (opcional - usa valores del sistema por defecto)\n\n**FASE 2: Gesti√≥n de Empleados**\n5. Register Employees con Tip Credit:\n   - **Waiters** ‚Üí Tip Credit autom√°tico\n   - **Delivery** ‚Üí Tip Credit autom√°tico\n   - **Managers** ‚Üí Sin Tip Credit (hourly_fixed)\n\n**FASE 3: Time Tracking**\n6. Time Entry (check_in/check_out) con Facial Recognition\n\n**FASE 4: Propinas y N√≥mina**\n7. Report Tips ‚Üí **Diario** (cr√≠tico para c√°lculo de tip credit)\n8. Calculate Payroll (Preview) ‚Üí Verificar c√°lculos (opcional)\n9. **Create Payroll** ‚Üí **Guardar n√≥mina** con tip credit shortfall autom√°tico\n10. Generate PDFs ‚Üí Comprobantes de pago\n11. Digital Signatures ‚Üí Firma digital de comprobantes\n\n### ‚ö†Ô∏è IMPORTANTE - NY State 2025:\n- **Super Admin** se crea con: `python3.11 crearsuperadmin.py`\n- **Facial Recognition** requiere im√°genes reales de rostros\n- **Tip Credit** se auto-determina por `employee_type`\n- **NY State minimum wage**: $16.50/hr (2025)\n- **Cash wage with tip credit**: $11.00/hr (2025)\n- **Tip credit amount**: $5.50/hr (2025)\n- **Reporteo de propinas**: DIARIO (ley federal)\n- **C√°lculo de n√≥mina**: SEMANAL/QUINCENAL/MENSUAL\n\n### üÜï NUEVO - Sistema Configurable:\n- **Tip Credit Config** ahora es configurable sin tocar c√≥digo\n- Valores se actualizan desde base de datos\n- Soporta configuraciones por tenant y globales\n- Historial completo cuando cambian las leyes\n\n### üìä Variables de Entorno Auto-Guardadas:\n- `super_admin_token` - Token de super administrador\n- `auth_token` - Token de business\n- `tenant_id` - ID del tenant/business\n- `waiter_employee_id` - ID de waiter (con tip credit)\n- `delivery_employee_id` - ID de delivery (con tip credit)\n- `manager_employee_id` - ID de manager (sin tip credit)\n- `payroll_id` - ID de n√≥mina calculada\n- `payroll_pdf_id` - ID de PDF generado\n- `signature_id` - ID de firma digital\n- `tip_config_id` - ID de configuraci√≥n de tip credit\n\nVersi√≥n: 2.2 - Sistema configurable de Tip Credit\n\n**Actualizaci√≥n 2.2**:\n- ‚úÖ Agregado: M√≥dulo completo de Tip Credit Configuration\n- ‚úÖ Agregado: GET /api/employees/time-entry - Listar registros de tiempo\n- ‚úÖ Actualizado: Valores NY 2025 ($16.50/$11.00/$5.50)\n- ‚úÖ Sistema configurable sin modificar c√≥digo",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "0. Super Admin (REQUIRED FIRST)",
			"item": [
				{
					"name": "0.1 Super Admin Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Auto-guardar token de super admin",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"super_admin_token\", jsonData.access_token);",
									"    pm.environment.set(\"token_type\", jsonData.token_type);",
									"    ",
									"    console.log(\"‚úÖ Super Admin authenticated\");",
									"    console.log(\"üìß Email:\", jsonData.user.email);",
									"    console.log(\"üîë Token saved as: super_admin_token\");",
									"    console.log(\"‚ö° Use this token to register businesses\");",
									"} else {",
									"    console.log(\"‚ùå Login failed:\", pm.response.text());",
									"    console.log(\"‚ö†Ô∏è Create super admin with: python3.11 crearsuperadmin.py\");",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "username",
									"value": "admin@clockwise.com",
									"type": "text",
									"description": "Super admin email (default)"
								},
								{
									"key": "password",
									"value": "A25bd1e23",
									"type": "text",
									"description": "Super admin password (default - CHANGE IT!)"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/auth/token",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"token"
							]
						},
						"description": "# Super Admin Login\n\n**Purpose**: Authenticate as system super administrator to register businesses.\n\n**Default Credentials**:\n- Email: `admin@clockwise.com`\n- Password: `A25bd1e23`\n\n**‚ö†Ô∏è CRITICAL**: \n- This is the FIRST step - required to register businesses\n- Super Admin has access to ALL tenants\n- Create with: `python3.11 crearsuperadmin.py`\n- Change password after first login!\n\n**Response**:\n```json\n{\n  \"access_token\": \"eyJ...\",\n  \"token_type\": \"bearer\",\n  \"user\": {\n    \"email\": \"admin@clockwise.com\",\n    \"first_name\": \"Super\",\n    \"last_name\": \"Admin\",\n    \"is_super_admin\": true\n  }\n}\n```\n\n**Auto-saved**: `super_admin_token`"
					},
					"response": []
				},
				{
					"name": "0.2 Get Super Admin Info",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{super_admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/auth/me",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"me"
							]
						},
						"description": "Verify super admin authentication and get user info."
					},
					"response": []
				}
			],
			"description": "# Super Admin Endpoints\n\n**MUST BE EXECUTED FIRST!**\n\nSuper Admin is required to:\n- Register new businesses/tenants\n- Manage multi-tenant system\n- Access all tenant data\n\n**Create Super Admin**:\n```bash\ncd /Users/mac/Desktop/clockwise\npython3.11 crearsuperadmin.py\n```\n\n**Default Credentials**:\n- Email: admin@clockwise.com  \n- Password: A25bd1e23\n\n‚ö†Ô∏è Change password after first login!",
			"auth": {
				"type": "noauth"
			}
		},
		{
			"name": "1. Business Registration & Auth",
			"item": [
				{
					"name": "1.1 Register Business (Requires Super Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Auto-guardar tenant_id y business info",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"tenant_id\", jsonData.tenant_id);",
									"    pm.environment.set(\"business_id\", jsonData.id);",
									"    pm.environment.set(\"business_email\", jsonData.email);",
									"    ",
									"    console.log(\"‚úÖ Business registered successfully\");",
									"    console.log(\"üè¢ Company:\", jsonData.company_name);",
									"    console.log(\"üî¢ Tenant ID:\", jsonData.tenant_id);",
									"    console.log(\"üìß Email:\", jsonData.email);",
									"    console.log(\"‚ö° Now login with business credentials\");",
									"} else {",
									"    console.log(\"‚ùå Registration failed:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{super_admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"company_name\": \"Restaurante El Sabor Latino\",\n  \"business_name\": \"El Sabor Latino\",\n  \"rfc\": \"RSL980515ABC\",\n  \"address\": \"123 Main Street, Queens, NY 11101\",\n  \"phone\": \"+1-718-555-0100\",\n  \"contact_first_name\": \"Carlos\",\n  \"contact_last_name\": \"Rodriguez\",\n  \"contact_phone\": \"+1-718-555-0101\",\n  \"billing_cycle\": \"monthly\",\n  \"email\": \"carlos@elsaborlatino.com\",\n  \"password\": \"SecurePass123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/business/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"business",
								""
							]
						},
						"description": "# Register Business\n\n**Requires**: Super Admin authentication\n\n**Purpose**: Register a new business/tenant in the system.\n\n**All Fields Required**:\n- `company_name` - Legal company name\n- `business_name` - Trade/DBA name  \n- `rfc` - Tax ID (must be unique)\n- `address` - Full business address\n- `phone` - Business phone\n- `contact_first_name` - Contact person first name\n- `contact_last_name` - Contact person last name\n- `contact_phone` - Contact phone\n- `billing_cycle` - \"weekly\", \"monthly\", \"yearly\"\n- `email` - Business email (unique, used for login)\n- `password` - Strong password for business login\n\n**Response**:\n```json\n{\n  \"id\": \"uuid\",\n  \"tenant_id\": \"1234\",\n  \"company_name\": \"Restaurante El Sabor Latino\",\n  \"email\": \"carlos@elsaborlatino.com\",\n  \"is_active\": true\n}\n```\n\n**Auto-saved**: `tenant_id`, `business_id`, `business_email`"
					},
					"response": []
				},
				{
					"name": "1.2 Business Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Auto-guardar token de business",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"auth_token\", jsonData.access_token);",
									"    pm.environment.set(\"token_type\", jsonData.token_type);",
									"    ",
									"    // Guardar tenant_id del token",
									"    if (jsonData.user && jsonData.user.tenant_id) {",
									"        pm.environment.set(\"tenant_id\", jsonData.user.tenant_id);",
									"    }",
									"    ",
									"    console.log(\"‚úÖ Business authenticated\");",
									"    console.log(\"üè¢ Company:\", jsonData.user.company_name);",
									"    console.log(\"üî¢ Tenant ID:\", jsonData.user.tenant_id);",
									"    console.log(\"üîë Token saved as: auth_token\");",
									"    console.log(\"‚ö° Ready to manage employees\");",
									"} else {",
									"    console.log(\"‚ùå Login failed:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "username",
									"value": "{{business_email}}",
									"type": "text",
									"description": "Business email (from registration)"
								},
								{
									"key": "password",
									"value": "SecurePass123!",
									"type": "text",
									"description": "Business password"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/business-auth/token",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"business-auth",
								"token"
							]
						},
						"description": "# Business Login\n\n**Purpose**: Authenticate as business to manage employees and payroll.\n\n**Credentials**: Use email and password from business registration.\n\n**Response**:\n```json\n{\n  \"access_token\": \"eyJ...\",\n  \"token_type\": \"bearer\",\n  \"user\": {\n    \"email\": \"carlos@elsaborlatino.com\",\n    \"first_name\": \"Carlos\",\n    \"last_name\": \"Rodriguez\",\n    \"is_super_admin\": false,\n    \"tenant_id\": \"1234\",\n    \"company_name\": \"Restaurante El Sabor Latino\"\n  }\n}\n```\n\n**Auto-saved**: `auth_token`, `tenant_id`"
					},
					"response": []
				},
				{
					"name": "1.3 Get Current Business Info",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/business-auth/me",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"business-auth",
								"me"
							]
						},
						"description": "Get authenticated business information."
					},
					"response": []
				},
				{
					"name": "1.4 Get Business by ID",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{super_admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/business/{{business_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"business",
								"{{business_id}}"
							]
						},
						"description": "Get specific business details (Super Admin only)."
					},
					"response": []
				},
				{
					"name": "1.5 List All Businesses",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{super_admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/business/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"business",
								""
							]
						},
						"description": "List all businesses (Super Admin only)."
					},
					"response": []
				},
				{
					"name": "1.6 Update Business",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{super_admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"+1-718-555-0200\",\n  \"address\": \"456 Updated Street, Queens, NY 11102\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/business/{{business_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"business",
								"{{business_id}}"
							]
						},
						"description": "Update business information (Super Admin only)."
					},
					"response": []
				}
			],
			"description": "# Business Registration & Authentication\n\n## Flow:\n1. Register Business (with Super Admin token)\n2. Login with business credentials\n3. Use auth_token for all employee/payroll operations"
		},
		{
			"name": "2. Employees Management",
			"item": [
				{
					"name": "2.1 Register Employee (Waiter - WITH Tip Credit)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Auto-guardar employee_id del waiter",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"waiter_employee_id\", jsonData.id);",
									"    pm.environment.set(\"waiter_employee_code\", jsonData.employee_code);",
									"    ",
									"    console.log(\"‚úÖ Waiter registered successfully\");",
									"    console.log(\"üë§ Name:\", jsonData.first_name, jsonData.last_name);",
									"    console.log(\"üÜî Employee ID:\", jsonData.id);",
									"    console.log(\"üî¢ Employee Code:\", jsonData.employee_code);",
									"    console.log(\"üí∞ Has Tip Credit:\", jsonData.has_tip_credit);",
									"    console.log(\"üíµ Cash Wage:\", jsonData.tip_credit_cash_wage);",
									"} else {",
									"    console.log(\"‚ùå Registration failed:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "first_name",
									"value": "Maria",
									"type": "text",
									"description": "REQUIRED"
								},
								{
									"key": "last_name",
									"value": "Garcia",
									"type": "text",
									"description": "REQUIRED"
								},
								{
									"key": "alias",
									"value": "Mari",
									"type": "text",
									"description": "Optional nickname"
								},
								{
									"key": "ssn",
									"value": "123-45-6789",
									"type": "text",
									"description": "REQUIRED - Format: XXX-XX-XXXX"
								},
								{
									"key": "date_of_birth",
									"value": "1995-03-15",
									"type": "text",
									"description": "REQUIRED - Format: YYYY-MM-DD"
								},
								{
									"key": "email",
									"value": "maria.garcia@elsaborlatino.com",
									"type": "text",
									"description": "Optional but recommended"
								},
								{
									"key": "phone",
									"value": "+1-718-555-1001",
									"type": "text",
									"description": "REQUIRED"
								},
								{
									"key": "hire_date",
									"value": "2024-01-15",
									"type": "text",
									"description": "REQUIRED - Format: YYYY-MM-DD"
								},
								{
									"key": "street_address",
									"value": "456 Park Avenue",
									"type": "text",
									"description": "REQUIRED"
								},
								{
									"key": "city",
									"value": "Queens",
									"type": "text",
									"description": "REQUIRED"
								},
								{
									"key": "state",
									"value": "NY",
									"type": "text",
									"description": "REQUIRED - 2 letter code"
								},
								{
									"key": "zip_code",
									"value": "11101",
									"type": "text",
									"description": "REQUIRED"
								},
								{
									"key": "employee_type",
									"value": "hourly_tipped_waiter",
									"type": "text",
									"description": "REQUIRED - Auto-determines tip credit"
								},
								{
									"key": "position",
									"value": "Waitress",
									"type": "text",
									"description": "REQUIRED - Job title"
								},
								{
									"key": "hourly_rate",
									"value": "16.50",
									"type": "text",
									"description": "REQUIRED - NY minimum wage 2025"
								},
								{
									"key": "pay_frequency",
									"value": "weekly",
									"type": "text",
									"description": "REQUIRED - weekly/biweekly/monthly"
								},
								{
									"key": "regular_shift",
									"value": "10:00-18:00",
									"type": "text",
									"description": "Optional"
								},
								{
									"key": "department",
									"value": "Service",
									"type": "text",
									"description": "Optional"
								},
								{
									"key": "payment_method",
									"value": "transfer",
									"type": "text",
									"description": "REQUIRED - cash/transfer/check"
								},
								{
									"key": "bank_account_number",
									"value": "1234567890",
									"type": "text",
									"description": "Required if payment_method=transfer"
								},
								{
									"key": "bank_routing_number",
									"value": "021000021",
									"type": "text",
									"description": "Required if payment_method=transfer"
								},
								{
									"key": "bank_account_type",
									"value": "checking",
									"type": "text",
									"description": "checking/savings"
								},
								{
									"key": "state_minimum_wage",
									"value": "16.50",
									"type": "text",
									"description": "Optional - defaults to NY $16.50/hr (2025)"
								},
								{
									"key": "face_image",
									"type": "file",
									"src": [],
									"description": "REQUIRED - Real face photo for facial recognition"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/employees/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employees",
								""
							]
						},
						"description": "# Register Waiter with Tip Credit\n\n**CRITICAL - Tip Credit Logic (NY 2025)**:\n- `employee_type`: **hourly_tipped_waiter** ‚Üí Auto-enables tip credit\n- `has_tip_credit`: Automatically set to **TRUE**\n- Sistema usa configuraci√≥n din√°mica de tip credit:\n  - `minimum_wage`: **$16.50/hr** (NY 2025)\n  - `cash_wage`: **$11.00/hr** (NY 2025)\n  - `tip_credit_amount`: **$5.50/hr** (NY 2025)\n\n**How it Works**:\n1. System detects `employee_type` = hourly_tipped_waiter\n2. Automatically enables tip credit\n3. Employer pays $10/hr cash wage\n4. Tips must cover $5/hr additional\n5. If tips < $5/hr, employer compensates shortfall\n\n**Employee Types**:\n- `hourly_tipped_waiter` ‚Üí Tip Credit: YES\n- `hourly_tipped_delivery` ‚Üí Tip Credit: YES\n- `hourly_fixed` ‚Üí Tip Credit: NO\n- `exempt_salary` ‚Üí Tip Credit: NO\n\n**Face Image**:\n- Must be real face photo\n- Formats: JPG, PNG\n- Used for facial recognition check-in/out\n\n**Auto-saved Variables**:\n- `waiter_employee_id`\n- `waiter_employee_code`"
					},
					"response": []
				},
				{
					"name": "2.2 Register Employee (Delivery - WITH Tip Credit)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Auto-guardar employee_id del delivery",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"delivery_employee_id\", jsonData.id);",
									"    pm.environment.set(\"delivery_employee_code\", jsonData.employee_code);",
									"    ",
									"    console.log(\"‚úÖ Delivery driver registered successfully\");",
									"    console.log(\"üë§ Name:\", jsonData.first_name, jsonData.last_name);",
									"    console.log(\"üÜî Employee ID:\", jsonData.id);",
									"    console.log(\"üí∞ Has Tip Credit:\", jsonData.has_tip_credit);",
									"} else {",
									"    console.log(\"‚ùå Registration failed:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "first_name",
									"value": "Juan",
									"type": "text"
								},
								{
									"key": "last_name",
									"value": "Perez",
									"type": "text"
								},
								{
									"key": "alias",
									"value": "Juanito",
									"type": "text"
								},
								{
									"key": "ssn",
									"value": "987-65-4321",
									"type": "text"
								},
								{
									"key": "date_of_birth",
									"value": "1992-08-20",
									"type": "text"
								},
								{
									"key": "email",
									"value": "juan.perez@elsaborlatino.com",
									"type": "text"
								},
								{
									"key": "phone",
									"value": "+1-718-555-1002",
									"type": "text"
								},
								{
									"key": "hire_date",
									"value": "2024-02-01",
									"type": "text"
								},
								{
									"key": "street_address",
									"value": "789 Broadway",
									"type": "text"
								},
								{
									"key": "city",
									"value": "Queens",
									"type": "text"
								},
								{
									"key": "state",
									"value": "NY",
									"type": "text"
								},
								{
									"key": "zip_code",
									"value": "11102",
									"type": "text"
								},
								{
									"key": "employee_type",
									"value": "hourly_tipped_delivery",
									"type": "text",
									"description": "hourly_tipped_delivery also has tip credit"
								},
								{
									"key": "position",
									"value": "Delivery Driver",
									"type": "text"
								},
								{
									"key": "hourly_rate",
									"value": "15.00",
									"type": "text"
								},
								{
									"key": "pay_frequency",
									"value": "weekly",
									"type": "text"
								},
								{
									"key": "regular_shift",
									"value": "16:00-23:00",
									"type": "text"
								},
								{
									"key": "department",
									"value": "Delivery",
									"type": "text"
								},
								{
									"key": "payment_method",
									"value": "cash",
									"type": "text"
								},
								{
									"key": "state_minimum_wage",
									"value": "15.00",
									"type": "text"
								},
								{
									"key": "face_image",
									"type": "file",
									"src": [],
									"description": "Real face photo"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/employees/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employees",
								""
							]
						},
						"description": "# Register Delivery Driver with Tip Credit\n\nSame tip credit behavior as waiters:\n- `employee_type`: **hourly_tipped_delivery**\n- Auto-enables tip credit\n- $10/hr cash wage\n- $5/hr tip credit\n- Shortfall compensation if tips insufficient"
					},
					"response": []
				},
				{
					"name": "2.3 Register Employee (Manager - NO Tip Credit)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Auto-guardar employee_id del manager",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"manager_employee_id\", jsonData.id);",
									"    pm.environment.set(\"manager_employee_code\", jsonData.employee_code);",
									"    ",
									"    console.log(\"‚úÖ Manager registered successfully\");",
									"    console.log(\"üë§ Name:\", jsonData.first_name, jsonData.last_name);",
									"    console.log(\"üÜî Employee ID:\", jsonData.id);",
									"    console.log(\"üí∞ Has Tip Credit:\", jsonData.has_tip_credit);",
									"    console.log(\"üíµ Full Hourly Rate:\", jsonData.hourly_rate);",
									"} else {",
									"    console.log(\"‚ùå Registration failed:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "first_name",
									"value": "Roberto",
									"type": "text"
								},
								{
									"key": "last_name",
									"value": "Martinez",
									"type": "text"
								},
								{
									"key": "ssn",
									"value": "456-78-9012",
									"type": "text"
								},
								{
									"key": "date_of_birth",
									"value": "1985-05-10",
									"type": "text"
								},
								{
									"key": "email",
									"value": "roberto.martinez@elsaborlatino.com",
									"type": "text"
								},
								{
									"key": "phone",
									"value": "+1-718-555-1003",
									"type": "text"
								},
								{
									"key": "hire_date",
									"value": "2023-06-01",
									"type": "text"
								},
								{
									"key": "street_address",
									"value": "321 Queens Boulevard",
									"type": "text"
								},
								{
									"key": "city",
									"value": "Queens",
									"type": "text"
								},
								{
									"key": "state",
									"value": "NY",
									"type": "text"
								},
								{
									"key": "zip_code",
									"value": "11103",
									"type": "text"
								},
								{
									"key": "employee_type",
									"value": "hourly_fixed",
									"type": "text",
									"description": "hourly_fixed has NO tip credit"
								},
								{
									"key": "position",
									"value": "Restaurant Manager",
									"type": "text"
								},
								{
									"key": "hourly_rate",
									"value": "25.00",
									"type": "text",
									"description": "Full rate - no tip credit"
								},
								{
									"key": "pay_frequency",
									"value": "biweekly",
									"type": "text"
								},
								{
									"key": "regular_shift",
									"value": "09:00-17:00",
									"type": "text"
								},
								{
									"key": "department",
									"value": "Management",
									"type": "text"
								},
								{
									"key": "payment_method",
									"value": "transfer",
									"type": "text"
								},
								{
									"key": "bank_account_number",
									"value": "9876543210",
									"type": "text"
								},
								{
									"key": "bank_routing_number",
									"value": "021000021",
									"type": "text"
								},
								{
									"key": "bank_account_type",
									"value": "checking",
									"type": "text"
								},
								{
									"key": "face_image",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/employees/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employees",
								""
							]
						},
						"description": "# Register Manager WITHOUT Tip Credit\n\n**IMPORTANT**:\n- `employee_type`: **hourly_fixed**\n- `has_tip_credit`: Automatically set to **FALSE**\n- Paid full hourly rate ($25/hr in this example)\n- No tip credit calculations\n- No shortfall tracking"
					},
					"response": []
				},
				{
					"name": "2.4 Get All Employees",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/employees/?active_only=true",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employees",
								""
							],
							"query": [
								{
									"key": "active_only",
									"value": "true",
									"description": "Filter only active employees"
								}
							]
						},
						"description": "List all employees for current business.\n\n**Query Parameters**:\n- `active_only` (optional): true/false\n\n**Response shows tip credit fields**:\n- has_tip_credit\n- tip_credit_cash_wage\n- tip_credit_amount\n- state_minimum_wage"
					},
					"response": []
				},
				{
					"name": "2.5 Get Employee by ID",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/employees/{{waiter_employee_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employees",
								"{{waiter_employee_id}}"
							]
						},
						"description": "Get detailed information for a specific employee."
					},
					"response": []
				},
				{
					"name": "2.6 Update Employee",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"phone\": \"+1-718-555-9999\",\n  \"alias\": \"Mari La Grande\",\n  \"hourly_rate\": 16.00\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/employees/{{waiter_employee_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employees",
								"{{waiter_employee_id}}"
							]
						},
						"description": "Update employee information.\n\n**Note**: Only send fields that need to be updated.\n\n**Updatable Fields**:\n- phone\n- email\n- alias\n- address fields\n- hourly_rate\n- position\n- department\n- payment_method\n- bank info"
					},
					"response": []
				}
			],
			"description": "# Employees Management\n\nComplete employee management with FLSA Tip Credit support.\n\n**Key Features**:\n- Auto-determination of tip credit by employee_type\n- Facial recognition registration\n- Full compliance with NY State laws\n- Support for multiple employee types"
		},
		{
			"name": "3. Deductions & Incidents",
			"item": [
				{
					"name": "3.1 Create Employee Deduction (Federal Tax)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"deduction_id\", jsonData.id);",
									"    console.log(\"‚úÖ Deduction created:\", jsonData.deduction_name);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"employee_id\": \"{{waiter_employee_id}}\",\n  \"deduction_type\": \"federal_tax\",\n  \"deduction_name\": \"Federal Income Tax\",\n  \"deduction_percentage\": 0.12,\n  \"is_percentage\": true,\n  \"effective_date\": \"2024-01-01\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/employee-deductions/deductions",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employee-deductions",
								"deductions"
							]
						},
						"description": "# Create Employee Deduction\n\n**Deduction Types**:\n- `federal_tax` - Federal income tax\n- `state_tax` - State income tax\n- `social_security` - Social Security (6.2%)\n- `medicare` - Medicare (1.45%)\n- `health_insurance` - Health insurance premiums\n- `retirement` - 401(k) or retirement contributions\n- `union_dues` - Union membership dues\n- `other` - Other deductions\n\n**Fields**:\n- `employee_id` (required) - UUID of employee\n- `deduction_type` (required)\n- `deduction_name` (required)\n- `deduction_percentage` - If is_percentage=true\n- `deduction_amount` - Fixed amount if is_percentage=false\n- `is_percentage` (required)\n- `effective_date` (required)\n- `end_date` (optional)\n\n**Auto-saved**: `deduction_id`"
					},
					"response": []
				},
				{
					"name": "3.2 Create Employee Deduction (State Tax)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"employee_id\": \"{{waiter_employee_id}}\",\n  \"deduction_type\": \"state_tax\",\n  \"deduction_name\": \"NY State Tax\",\n  \"deduction_percentage\": 0.05,\n  \"is_percentage\": true,\n  \"effective_date\": \"2024-01-01\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/employee-deductions/deductions",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employee-deductions",
								"deductions"
							]
						},
						"description": "NY State income tax deduction (5%)."
					},
					"response": []
				},
				{
					"name": "3.3 Create Employee Deduction (Social Security)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"employee_id\": \"{{waiter_employee_id}}\",\n  \"deduction_type\": \"social_security\",\n  \"deduction_name\": \"Social Security\",\n  \"deduction_percentage\": 0.062,\n  \"is_percentage\": true,\n  \"effective_date\": \"2024-01-01\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/employee-deductions/deductions",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employee-deductions",
								"deductions"
							]
						},
						"description": "Social Security tax (6.2%)."
					},
					"response": []
				},
				{
					"name": "3.4 Create Employee Deduction (Medicare)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"employee_id\": \"{{waiter_employee_id}}\",\n  \"deduction_type\": \"medicare\",\n  \"deduction_name\": \"Medicare\",\n  \"deduction_percentage\": 0.0145,\n  \"is_percentage\": true,\n  \"effective_date\": \"2024-01-01\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/employee-deductions/deductions",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employee-deductions",
								"deductions"
							]
						},
						"description": "Medicare tax (1.45%)."
					},
					"response": []
				},
				{
					"name": "3.5 Setup Standard Deductions (Bulk)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"employee_id\": \"{{waiter_employee_id}}\",\n  \"effective_date\": \"2024-01-01\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/employee-deductions/setup-standard-deductions",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employee-deductions",
								"setup-standard-deductions"
							]
						},
						"description": "# Setup Standard Deductions (Bulk)\n\nAutomatically creates standard deductions:\n- Federal Tax (12%)\n- State Tax (5%)\n- Social Security (6.2%)\n- Medicare (1.45%)\n\nConvenient for quickly setting up new employees."
					},
					"response": []
				},
				{
					"name": "3.6 Report Tips (CRITICAL for Tip Credit)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"incident_id\", jsonData.id);",
									"    ",
									"    console.log(\"‚úÖ Tips reported successfully\");",
									"    console.log(\"üí∞ Amount:\", jsonData.amount);",
									"    console.log(\"üìÖ Date:\", jsonData.incident_date);",
									"    console.log(\"‚ö†Ô∏è This affects tip credit calculation!\");",
									"} else {",
									"    console.log(\"‚ùå Failed to report tips:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"employee_id\": \"{{waiter_employee_id}}\",\n  \"incident_type\": \"tips_reported\",\n  \"incident_name\": \"Tips - Week of Jan 1-7, 2024\",\n  \"amount\": 150.00,\n  \"description\": \"Tips collected from January 1-7, 2024\",\n  \"incident_date\": \"2024-01-07\",\n  \"payroll_period_start\": \"2024-01-01\",\n  \"payroll_period_end\": \"2024-01-07\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/employee-deductions/incidents",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employee-deductions",
								"incidents"
							]
						},
						"description": "# Report Tips (CRITICAL for Tip Credit)\n\n**‚ö†Ô∏è THIS IS CRITICAL FOR TIP CREDIT COMPLIANCE**\n\nMust report tips to calculate tip credit shortfall.\n\n**Example Scenario**:\n```\nEmployee: Waiter (has tip credit)\nHours worked: 40 hours\nCash wage: $10/hr\nTip credit required: $5/hr √ó 40 = $200\n\nCase 1: Tips reported = $150\n  ‚Üí Shortfall: $50\n  ‚Üí Employer must pay: $400 (cash) + $50 (shortfall) = $450\n  ‚Üí Employee receives: $450 + $150 (tips) = $600 total\n\nCase 2: Tips reported = $250\n  ‚Üí Shortfall: $0 (tips exceed requirement)\n  ‚Üí Employer pays: $400 (cash wage only)\n  ‚Üí Employee receives: $400 + $250 (tips) = $650 total\n```\n\n**Fields**:\n- `employee_id` (required)\n- `incident_type`: **tips_reported** (required)\n- `incident_name` (required) - Descriptive name\n- `amount` (required) - Total tips for period\n- `description` (optional)\n- `incident_date` (required) - Last day of period\n- `payroll_period_start` (required)\n- `payroll_period_end` (required)\n\n**Auto-saved**: `incident_id`"
					},
					"response": []
				},
				{
					"name": "3.7 Add Bonus (Employee Incident)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"employee_id\": \"{{waiter_employee_id}}\",\n  \"incident_type\": \"bonus\",\n  \"incident_name\": \"Performance Bonus\",\n  \"amount\": 100.00,\n  \"description\": \"Excellent customer service reviews\",\n  \"incident_date\": \"2024-01-07\",\n  \"payroll_period_start\": \"2024-01-01\",\n  \"payroll_period_end\": \"2024-01-07\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/employee-deductions/incidents",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employee-deductions",
								"incidents"
							]
						},
						"description": "# Add Bonus/Incident\n\n**Incident Types**:\n- `bonus` - Added to gross pay\n- `penalty` - Deducted from gross pay\n- `tips_reported` - For tip credit (see 3.6)\n- `warning` - Record only (no financial impact)\n- `advance` - Salary advance\n- `other` - Other incidents\n\n**Fields**:\n- `employee_id` (required)\n- `incident_type` (required)\n- `incident_name` (required)\n- `amount` (required for financial incidents)\n- `description` (optional)\n- `incident_date` (required)\n- `payroll_period_start` (optional)\n- `payroll_period_end` (optional)"
					},
					"response": []
				},
				{
					"name": "3.8 Get Employee Deductions",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/employee-deductions/deductions/{{waiter_employee_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employee-deductions",
								"deductions",
								"{{waiter_employee_id}}"
							]
						},
						"description": "Get all deductions configured for an employee."
					},
					"response": []
				},
				{
					"name": "3.9 Get Employee Incidents",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/employee-deductions/incidents/{{waiter_employee_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employee-deductions",
								"incidents",
								"{{waiter_employee_id}}"
							]
						},
						"description": "Get all incidents (tips, bonuses, penalties) for an employee."
					},
					"response": []
				},
				{
					"name": "3.10 Get Employee Payroll Summary",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/employee-deductions/summary/{{waiter_employee_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employee-deductions",
								"summary",
								"{{waiter_employee_id}}"
							]
						},
						"description": "Get complete payroll summary including deductions, incidents, and benefits."
					},
					"response": []
				}
			],
			"description": "# Deductions & Incidents\n\nManage employee deductions, tips reporting, bonuses, and penalties.\n\n**Key Features**:\n- Standard tax deductions\n- Tips reporting (critical for tip credit)\n- Bonuses and penalties\n- Benefits management"
		},
		{
			"name": "4. Payroll Processing",
			"item": [
				{
					"name": "4.1 Calculate Payroll - PREVIEW ONLY (NO GUARDA)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    // Try different response structures",
									"    var payrollId = jsonData.id || jsonData.payroll_id || jsonData.payroll?.id;",
									"    if (payrollId) {",
									"        pm.environment.set(\"payroll_id\", payrollId);",
									"        console.log(\"‚úÖ Payroll calculated successfully\");",
									"        console.log(\"üÜî Payroll ID:\", payrollId);",
									"    }",
									"    ",
									"    // Extract summary data",
									"    var summary = jsonData.summary || jsonData.payroll || jsonData;",
									"    console.log(\"üìä Total Employees:\", summary.total_employees);",
									"    console.log(\"üí∞ Total Gross Pay:\", summary.total_gross_pay);",
									"    console.log(\"üí∏ Total Deductions:\", summary.total_deductions);",
									"    console.log(\"üíµ Total Net Pay:\", summary.total_net_pay);",
									"    ",
									"    // Log tip credit info if present",
									"    var calculations = jsonData.calculations || jsonData.employee_payrolls || [];",
									"    if (calculations.length > 0) {",
									"        console.log(\"\\n‚ö†Ô∏è TIP CREDIT DETAILS:\");",
									"        calculations.forEach(calc => {",
									"            if (calc.tip_credit_info?.applicable) {",
									"                console.log(\"  Employee:\", calc.employee_name);",
									"                console.log(\"  Tips Required:\", calc.tip_credit_info.tips_required);",
									"                console.log(\"  Tips Reported:\", calc.tip_credit_info.tips_reported);",
									"                console.log(\"  Shortfall:\", calc.tip_credit_info.tip_credit_shortfall);",
									"            }",
									"        });",
									"    }",
									"} else {",
									"    console.log(\"‚ùå Payroll calculation failed:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"period_start\": \"2024-01-01\",\n  \"period_end\": \"2024-01-07\",\n  \"pay_frequency\": \"weekly\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/payroll/calculate",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payroll",
								"calculate"
							]
						},
						"description": "# Calculate Payroll - PREVIEW ONLY\n\n**‚ö†Ô∏è IMPORTANTE: Este endpoint SOLO CALCULA, NO GUARDA en la base de datos**\n\n**Use Cases:**\n- Preview de c√°lculo antes de guardar\n- Verificar montos\n- Revisar tip credit shortfall\n- Auditar antes de aprobar\n\n**Para GUARDAR la n√≥mina use:** `POST /api/payroll/` (endpoint 4.2)\n\n---\n\n**üéØ C√ÅLCULO COMPLETO DE PAYROLL CON TIP CREDIT**\n\nThis endpoint performs complete payroll calculation including:\n\n**Automatic Process**:\n1. Gets all time records for period\n2. Calculates regular hours and overtime\n3. Applies tip credit for eligible employees\n4. Reports tips and calculates shortfall\n5. Applies all deductions (taxes, benefits)\n6. Calculates net pay\n7. Generates sick leave accrual\n8. Checks break compliance\n\n**Tip Credit Calculation**:\n```\nFor employees with has_tip_credit=true:\n\n1. Calculate hours worked\n2. Cash wage payment = hours √ó $10/hr\n3. Tips required = hours √ó $5/hr\n4. Compare tips_reported vs tips_required\n5. If tips_reported < tips_required:\n   ‚Üí Shortfall = tips_required - tips_reported\n   ‚Üí Employer must compensate shortfall\n6. Gross pay = cash wage + shortfall + bonuses - penalties\n7. Apply deductions\n8. Net pay = gross pay - deductions\n```\n\n**Request Fields**:\n- `tenant_id` (required) - Your tenant ID\n- `period_start` (required) - YYYY-MM-DD\n- `period_end` (required) - YYYY-MM-DD\n- `pay_frequency` (required) - weekly/biweekly/monthly\n\n**Response Structure**:\n```json\n{\n  \"payroll\": {\n    \"id\": \"\",  // ‚ö†Ô∏è VAC√çO - No se guarda\n    \"status\": \"draft\",\n  \"period_start\": \"2024-01-01\",\n  \"period_end\": \"2024-01-07\",\n  \"calculations\": [\n    {\n      \"employee_id\": \"uuid\",\n      \"employee_name\": \"Maria Garcia\",\n      \"regular_hours\": 40,\n      \"overtime_hours\": 0,\n      \"regular_pay\": 400.00,\n      \"overtime_pay\": 0.00,\n      \"tip_credit_info\": {\n        \"applicable\": true,\n        \"cash_wage_rate\": 10.00,\n        \"tip_credit_amount\": 5.00,\n        \"tips_required\": 200.00,\n        \"tips_reported\": 150.00,\n        \"tip_credit_shortfall\": 50.00\n      },\n      \"total_deductions\": 95.40,\n      \"gross_pay\": 450.00,\n      \"net_pay\": 354.60\n    }\n  ],\n  \"summary\": {\n    \"total_employees\": 4,\n    \"total_hours\": 160,\n    \"total_gross_pay\": 1650.00,\n    \"total_deductions\": 360.75,\n    \"total_net_pay\": 1289.25\n  }\n}\n```\n\n**Auto-saved**: `payroll_id`"
					},
					"response": []
				},
				{
					"name": "4.2 Create Payroll - GUARDAR (Genera payroll_id)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Auto-guardar payroll_id cuando se GUARDA la n√≥mina",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"payroll_id\", jsonData.id);",
									"    ",
									"    console.log(\"‚úÖ N√≥mina GUARDADA en base de datos\");",
									"    console.log(\"üÜî Payroll ID:\", jsonData.id);",
									"    console.log(\"üí∞ Total Gross Pay:\", jsonData.total_gross_pay);",
									"    console.log(\"üíµ Total Net Pay:\", jsonData.total_net_pay);",
									"    console.log(\"üìä Total Employees:\", jsonData.total_employees);",
									"    console.log(\"üìÖ Status:\", jsonData.status);",
									"} else {",
									"    console.log(\"‚ùå Error:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tenant_id\": \"{{tenant_id}}\",\n  \"period_start\": \"2025-11-01\",\n  \"period_end\": \"2025-11-07\",\n  \"pay_frequency\": \"weekly\",\n  \"description\": \"N√≥mina semanal - Semana del 1 al 7 de Noviembre\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/payroll/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payroll",
								""
							]
						},
						"description": "# Create Payroll - GUARDAR en Base de Datos\n\n**‚úÖ ESTE ES EL ENDPOINT PARA GUARDAR N√ìMINAS**\n\n**Diferencia con /calculate**:\n- `/calculate` ‚Üí Solo preview, NO guarda (id vac√≠o)\n- `/` (POST) ‚Üí Calcula Y GUARDA (genera payroll_id real)\n\n**Proceso**:\n1. Calcula la n√≥mina completa (igual que /calculate)\n2. GUARDA en tabla `payrolls`\n3. GUARDA detalles en `payroll_details`\n4. Retorna con `payroll_id` real\n5. Status inicial: `calculated`\n\n**Response con ID REAL**:\n```json\n{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\",  // ‚úÖ ID REAL\n  \"tenant_id\": \"6887\",\n  \"period_start\": \"2025-11-01\",\n  \"period_end\": \"2025-11-07\",\n  \"pay_frequency\": \"weekly\",\n  \"status\": \"calculated\",\n  \"total_employees\": 4,\n  \"total_gross_pay\": 1650.00,\n  \"total_net_pay\": 1289.25,\n  \"total_deductions\": 360.75,\n  \"created_at\": \"2025-11-03T...\",\n  \"updated_at\": \"2025-11-03T...\"\n}\n```\n\n**Auto-saved**: `payroll_id`\n\n**Next Steps**:\n1. Use payroll_id to generate PDFs\n2. Update status to `approved`\n3. Update status to `paid` after disbursement"
					},
					"response": []
				},
				{
					"name": "4.3 Get Payroll by ID",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/payroll/{{payroll_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payroll",
								"{{payroll_id}}"
							]
						},
						"description": "Get complete details of a calculated payroll including all employee calculations."
					},
					"response": []
				},
				{
					"name": "4.4 List All Payrolls",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/payroll/?status=paid&limit=20",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payroll",
								""
							],
							"query": [
								{
									"key": "status",
									"value": "paid",
									"description": "draft/calculated/approved/paid"
								},
								{
									"key": "limit",
									"value": "20",
									"description": "Number of records"
								}
							]
						},
						"description": "List all payrolls for current business.\n\n**Query Parameters**:\n- `status` (optional): draft, calculated, approved, paid\n- `limit` (optional): Number of records\n- `skip` (optional): Pagination offset"
					},
					"response": []
				},
				{
					"name": "4.5 Update Payroll Status",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"paid\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/payroll/{{payroll_id}}/status",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payroll",
								"{{payroll_id}}",
								"status"
							]
						},
						"description": "Update payroll status.\n\n**Valid Statuses**:\n- `draft` - Borrador/preparando\n- `calculated` - Calculada\n- `approved` - Aprobada para pago\n- `paid` - Pagos realizados"
					},
					"response": []
				},
				{
					"name": "4.6 Get Employee Payroll Summary",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/payroll/employee/{{waiter_employee_code}}/summary",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payroll",
								"employee",
								"{{waiter_employee_code}}",
								"summary"
							]
						},
						"description": "Get payroll history and summary for a specific employee."
					},
					"response": []
				}
			],
			"description": "# Payroll Processing\n\nComplete payroll calculation with automatic tip credit compliance.\n\n**‚ö†Ô∏è IMPORTANT - Dos tipos de endpoints:**\n\n**1. POST /calculate (4.1)** - PREVIEW ONLY\n- Solo calcula, NO guarda\n- ID vac√≠o en response\n- Para verificar antes de guardar\n\n**2. POST / (4.2)** - CREATE & SAVE\n- Calcula Y GUARDA en BD\n- Genera payroll_id real\n- ‚úÖ Usar ESTE para crear n√≥minas\n\n**Features**:\n- Automatic tip credit calculation (usa config din√°mica)\n- Shortfall compensation\n- Tax deductions\n- Overtime calculations\n- Sick leave accrual\n- Break compliance checking"
		},
		{
			"name": "5. Time Tracking",
			"item": [
				{
					"name": "5.1 Clock In (Check In)",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "face_image",
									"type": "file",
									"src": [],
									"description": "REQUIRED - Employee face photo"
								},
								{
									"key": "tenant_id",
									"value": "{{tenant_id}}",
									"type": "text",
									"description": "REQUIRED - 4-digit tenant ID"
								},
								{
									"key": "record_type",
									"value": "check_in",
									"type": "text",
									"description": "REQUIRED - check_in/check_out/break_start/break_end"
								},
								{
									"key": "device_info",
									"value": "iPad - Entrance Terminal",
									"type": "text",
									"description": "Optional - Device identifier"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/employees/time-entry",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employees",
								"time-entry"
							]
						},
						"description": "# Clock In (Facial Recognition)\n\n**Process**:\n1. Employee takes selfie at kiosk/iPad\n2. System detects face using face_recognition library\n3. Matches against stored face_encodings\n4. Identifies employee automatically\n5. Records check-in timestamp\n\n**Record Types**:\n- `check_in` - Start of shift\n- `check_out` - End of shift\n- `break_start` - Start break\n- `break_end` - End break\n\n**Fields**:\n- `face_image` (required) - JPEG/PNG photo\n- `tenant_id` (required) - Business tenant ID\n- `record_type` (required)\n- `device_info` (optional) - Terminal/device name\n\n**Face Recognition**:\n- Requires confidence > 0.4 for match\n- Returns employee info on successful match\n- Error if no match or multiple matches\n\n**Response**:\n```json\n{\n  \"employee_id\": \"uuid\",\n  \"employee_name\": \"Maria Garcia\",\n  \"employee_code\": \"EMP001\",\n  \"record_type\": \"check_in\",\n  \"timestamp\": \"2024-01-01T10:00:00Z\",\n  \"confidence\": 0.85\n}\n```"
					},
					"response": []
				},
				{
					"name": "5.2 Clock Out (Check Out)",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "face_image",
									"type": "file",
									"src": []
								},
								{
									"key": "tenant_id",
									"value": "{{tenant_id}}",
									"type": "text"
								},
								{
									"key": "record_type",
									"value": "check_out",
									"type": "text"
								},
								{
									"key": "device_info",
									"value": "iPad - Exit Terminal",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/employees/time-entry",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employees",
								"time-entry"
							]
						},
						"description": "Clock out at end of shift using facial recognition."
					},
					"response": []
				},
				{
					"name": "5.3 Break Start",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "face_image",
									"type": "file",
									"src": []
								},
								{
									"key": "tenant_id",
									"value": "{{tenant_id}}",
									"type": "text"
								},
								{
									"key": "record_type",
									"value": "break_start",
									"type": "text"
								},
								{
									"key": "device_info",
									"value": "iPad - Break Room",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/employees/time-entry",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employees",
								"time-entry"
							]
						},
						"description": "Start break period."
					},
					"response": []
				},
				{
					"name": "5.4 Break End",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "face_image",
									"type": "file",
									"src": []
								},
								{
									"key": "tenant_id",
									"value": "{{tenant_id}}",
									"type": "text"
								},
								{
									"key": "record_type",
									"value": "break_end",
									"type": "text"
								},
								{
									"key": "device_info",
									"value": "iPad - Break Room",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/employees/time-entry",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employees",
								"time-entry"
							]
						},
						"description": "End break period and return to work."
					},
					"response": []
				},
				{
					"name": "5.5 Get Time Entry Records",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Verify time entry records response",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    console.log(\"‚úÖ Time entry records retrieved successfully\");",
									"    console.log(\"üìä Total records:\", jsonData.length);",
									"    ",
									"    if (jsonData.length > 0) {",
									"        console.log(\"\\nüìù Sample record:\");",
									"        console.log(\"  Employee:\", jsonData[0].employee_name);",
									"        console.log(\"  Code:\", jsonData[0].employee_code);",
									"        console.log(\"  Type:\", jsonData[0].record_type);",
									"        console.log(\"  Time:\", jsonData[0].record_time);",
									"        console.log(\"  Confidence:\", jsonData[0].face_confidence);",
									"    }",
									"} else {",
									"    console.log(\"‚ùå Failed to retrieve records:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/employees/time-entry?employee_id=&start_date=&end_date=",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"employees",
								"time-entry"
							],
							"query": [
								{
									"key": "employee_id",
									"value": "",
									"description": "Filter by employee ID (optional)"
								},
								{
									"key": "start_date",
									"value": "",
									"description": "Start date YYYY-MM-DD (optional)"
								},
								{
									"key": "end_date",
									"value": "",
									"description": "End date YYYY-MM-DD (optional)"
								}
							]
						},
						"description": "# Get Time Entry Records\n\n**Purpose**: Retrieve all time entry records (clock in/out, breaks) with optional filters.\n\n**Authentication**: Business token required\n\n**Query Parameters** (all optional):\n- `employee_id` - Filter by specific employee UUID\n- `start_date` - Start date in format YYYY-MM-DD\n- `end_date` - End date in format YYYY-MM-DD\n\n**Examples**:\n```\n# Get all records\nGET /api/employees/time-entry\n\n# Filter by employee\nGET /api/employees/time-entry?employee_id={{waiter_employee_id}}\n\n# Filter by date range\nGET /api/employees/time-entry?start_date=2025-01-01&end_date=2025-01-31\n\n# Combine filters\nGET /api/employees/time-entry?employee_id={{waiter_employee_id}}&start_date=2025-01-01\n```\n\n**Response**:\n```json\n[\n  {\n    \"id\": \"uuid\",\n    \"employee_id\": \"uuid\",\n    \"employee_code\": \"EMP0001\",\n    \"employee_name\": \"John Doe\",\n    \"position\": \"Waiter\",\n    \"record_type\": \"check_in\",\n    \"record_time\": \"2025-01-15T08:00:00\",\n    \"face_confidence\": 0.95,\n    \"device_info\": \"iPad-123\",\n    \"created_at\": \"2025-01-15T08:00:05\"\n  },\n  {\n    \"id\": \"uuid\",\n    \"employee_id\": \"uuid\",\n    \"employee_code\": \"EMP0001\",\n    \"employee_name\": \"John Doe\",\n    \"position\": \"Waiter\",\n    \"record_type\": \"check_out\",\n    \"record_time\": \"2025-01-15T16:30:00\",\n    \"face_confidence\": 0.93,\n    \"device_info\": \"iPad-123\",\n    \"created_at\": \"2025-01-15T16:30:02\"\n  }\n]\n```\n\n**Record Types**:\n- `check_in` - Employee clock in\n- `check_out` - Employee clock out\n- `break_start` - Break started\n- `break_end` - Break ended\n\n**Use Cases**:\n1. View all employee time records\n2. Audit specific employee attendance\n3. Generate attendance reports\n4. Export time data for payroll\n5. Monitor real-time employee status\n\n**Notes**:\n- Returns records in descending order (newest first)\n- Includes facial recognition confidence score\n- Device info shows which device was used\n- Automatically filtered by business tenant_id"
					},
					"response": []
				}
			],
			"description": "# Time Tracking\n\nFacial recognition-based time tracking system.\n\n**Features**:\n- No time cards or badges needed\n- Automatic employee identification\n- Break tracking\n- Device tracking\n- Audit trail"
		},
		{
			"name": "6. PDF Generation",
			"item": [
				{
					"name": "6.1 Generate Summary PDF",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"pdf_filename\", jsonData.pdf_filename);",
									"    ",
									"    console.log(\"‚úÖ PDF generated successfully\");",
									"    console.log(\"üìÑ Filename:\", jsonData.pdf_filename);",
									"    console.log(\"üìÅ Path:\", jsonData.pdf_path);",
									"} else {",
									"    console.log(\"‚ùå PDF generation failed:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"payroll_id\": \"{{payroll_id}}\",\n  \"include_deductions_detail\": true,\n  \"include_tip_credit_info\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/pdf-payroll/generate-summary",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"pdf-payroll",
								"generate-summary"
							]
						},
						"description": "# Generate Summary PDF\n\nGenerates payroll summary PDF for all employees.\n\n**Includes**:\n- Company information\n- Pay period\n- Employee list\n- Hours worked\n- Gross/net pay\n- Tip credit information (if applicable)\n- Deductions summary\n- Total amounts\n\n**Fields**:\n- `payroll_id` (required)\n- `include_deductions_detail` (optional) - Default: true\n- `include_tip_credit_info` (optional) - Default: true\n\n**Auto-saved**: `pdf_filename`"
					},
					"response": []
				},
				{
					"name": "6.2 Generate Detailed PDF (Single Employee)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"payroll_id\": \"{{payroll_id}}\",\n  \"employee_id\": \"{{waiter_employee_id}}\",\n  \"include_time_details\": true,\n  \"include_deductions_breakdown\": true,\n  \"include_tip_credit_calculation\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/pdf-payroll/generate-detailed",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"pdf-payroll",
								"generate-detailed"
							]
						},
						"description": "# Generate Detailed PDF (Single Employee)\n\nGenerates detailed paycheck stub for one employee.\n\n**Includes**:\n- Employee information\n- Pay period details\n- Time entries breakdown\n- Regular/overtime hours\n- Regular/overtime pay\n- **Tip credit calculation** (if applicable):\n  - Cash wage rate\n  - Tips required\n  - Tips reported\n  - Tip credit shortfall\n- Bonuses/incidents\n- Complete deductions breakdown\n- Gross pay calculation\n- Net pay\n\n**Fields**:\n- `payroll_id` (required)\n- `employee_id` (required)\n- `include_time_details` (optional) - Default: true\n- `include_deductions_breakdown` (optional) - Default: true\n- `include_tip_credit_calculation` (optional) - Default: true"
					},
					"response": []
				},
				{
					"name": "6.3 Download PDF",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/pdf-payroll/download/{{pdf_filename}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"pdf-payroll",
								"download",
								"{{pdf_filename}}"
							]
						},
						"description": "Download PDF file.\n\nReturns PDF as binary file stream."
					},
					"response": []
				},
				{
					"name": "6.4 Get PDF History",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/pdf-payroll/history?employee_id={{waiter_employee_id}}&limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"pdf-payroll",
								"history"
							],
							"query": [
								{
									"key": "employee_id",
									"value": "{{waiter_employee_id}}",
									"description": "Optional - filter by employee"
								},
								{
									"key": "limit",
									"value": "10",
									"description": "Optional - number of records"
								}
							]
						},
						"description": "Get PDF generation history.\n\n**Query Parameters**:\n- `employee_id` (optional) - Filter by employee\n- `payroll_id` (optional) - Filter by payroll\n- `limit` (optional) - Number of records\n- `skip` (optional) - Pagination offset"
					},
					"response": []
				}
			],
			"description": "# PDF Generation\n\nGenerate payroll PDFs with complete tip credit information.\n\n**Features**:\n- Summary PDFs for all employees\n- Detailed paycheck stubs\n- Tip credit calculations\n- Deductions breakdown\n- Ready for digital signatures"
		},
		{
			"name": "7. Digital Signatures",
			"item": [
				{
					"name": "7.1 Sign Document",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"signature_id\", jsonData.id);",
									"    ",
									"    console.log(\"‚úÖ Document signed successfully\");",
									"    console.log(\"‚úçÔ∏è Signature ID:\", jsonData.id);",
									"    console.log(\"üìÑ PDF ID:\", jsonData.payroll_pdf_id);",
									"    console.log(\"üìÖ Signed at:\", jsonData.signed_at);",
									"} else {",
									"    console.log(\"‚ùå Signature failed:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"payroll_pdf_id\": \"{{pdf_filename}}\",\n  \"signature_type\": \"drawn\",\n  \"signature_data\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA...\",\n  \"signature_metadata\": {\n    \"device\": \"iPad Pro 12.9\",\n    \"ip_address\": \"192.168.1.100\",\n    \"user_agent\": \"Mozilla/5.0 (iPad; CPU OS 14_0 like Mac OS X)\",\n    \"signed_location\": \"Restaurant Back Office\",\n    \"timestamp\": \"2024-01-10T15:30:00Z\",\n    \"geolocation\": {\n      \"latitude\": 40.7589,\n      \"longitude\": -73.9851\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/digital-signatures/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"digital-signatures",
								""
							]
						},
						"description": "# Create Digital Signature\n\nSign payroll PDF digitally.\n\n**Signature Types**:\n- `drawn` - Signature drawn on touchscreen\n- `typed` - Name typed as signature\n- `digital` - Digital certificate signature\n- `biometric` - Fingerprint or face ID\n\n**Signature Data**:\n- Base64 encoded image for drawn/typed\n- Certificate data for digital\n- Biometric hash for biometric\n- Format: `data:image/png;base64,...`\n\n**Metadata (Optional but Recommended)**:\n- `device` - Device name/model\n- `ip_address` - IP address\n- `user_agent` - Browser/app info\n- `signed_location` - Physical location description\n- `timestamp` - Exact signing time\n- `geolocation` - GPS coordinates (optional)\n  - `latitude`\n  - `longitude`\n\n**Fields**:\n- `payroll_pdf_id` (required) - PDF filename or ID\n- `signature_type` (required)\n- `signature_data` (required)\n- `signature_metadata` (optional but recommended)\n\n**Auto-saved**: `signature_id`\n\n**Use Cases**:\n- Employee acknowledges receipt of paycheck\n- Legal proof of payment\n- Audit trail compliance\n- Dispute resolution"
					},
					"response": []
				},
				{
					"name": "7.2 Get Employee Signatures",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/digital-signatures/employee/{{waiter_employee_id}}?valid_only=true",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"digital-signatures",
								"employee",
								"{{waiter_employee_id}}"
							],
							"query": [
								{
									"key": "valid_only",
									"value": "true",
									"description": "Filter only valid signatures"
								}
							]
						},
						"description": "Get all signatures for an employee.\n\n**Query Parameters**:\n- `valid_only` (optional) - true/false\n  - true: Only valid signatures\n  - false: Include invalidated signatures"
					},
					"response": []
				},
				{
					"name": "7.3 Get Signature by ID",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/digital-signatures/{{signature_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"digital-signatures",
								"{{signature_id}}"
							]
						},
						"description": "Get specific signature details.\n\n**Returns**:\n- Signature data (base64)\n- Complete metadata\n- Validity status\n- Timestamps\n- Employee info\n- PDF info"
					},
					"response": []
				},
				{
					"name": "7.4 Get PDF Signature",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/digital-signatures/payroll-pdf/{{pdf_filename}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"digital-signatures",
								"payroll-pdf",
								"{{pdf_filename}}"
							]
						},
						"description": "Get signature for a specific PDF.\n\nUseful to check if PDF has been signed."
					},
					"response": []
				},
				{
					"name": "7.5 Invalidate Signature",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"invalidation_reason\": \"Employee requested payroll correction due to incorrect hours calculation\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/digital-signatures/{{signature_id}}/invalidate",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"digital-signatures",
								"{{signature_id}}",
								"invalidate"
							]
						},
						"description": "# Invalidate Signature\n\nInvalidate a digital signature.\n\n**Use Cases**:\n- Payroll correction needed\n- Error in calculation\n- Employee dispute\n- Fraud detected\n- Re-calculation required\n\n**Fields**:\n- `invalidation_reason` (required) - Detailed explanation\n\n**IMPORTANT**:\n- Cannot be undone\n- Keeps original signature data\n- Tracks who invalidated and when\n- Requires business owner/admin authorization"
					},
					"response": []
				}
			],
			"description": "# Digital Signatures\n\nLegally binding digital signature system for payroll documents.\n\n**Features**:\n- 4 signature types\n- Complete metadata tracking\n- Geolocation support\n- Audit trail\n- Invalidation support\n- ESIGN Act compliant"
		},
		{
			"name": "8. Reports & Compliance",
			"item": [
				{
					"name": "8.1 Attendance Report",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"start_date\": \"2024-01-01\",\n  \"end_date\": \"2024-01-31\",\n  \"employee_id\": \"{{waiter_employee_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reports/attendance",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reports",
								"attendance"
							]
						},
						"description": "Generate attendance report for employees.\n\n**Shows**:\n- Check-in/out times\n- Total hours per day\n- Late arrivals\n- Early departures\n- Missed shifts"
					},
					"response": []
				},
				{
					"name": "8.2 Payroll Report",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"start_date\": \"2024-01-01\",\n  \"end_date\": \"2024-01-31\",\n  \"include_tip_credit_details\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reports/payroll",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reports",
								"payroll"
							]
						},
						"description": "Generate comprehensive payroll report.\n\n**Includes**:\n- All payrolls in period\n- Total hours worked\n- Gross/net pay totals\n- Tip credit summary\n- Deductions breakdown\n- Payment summary"
					},
					"response": []
				},
				{
					"name": "8.3 Sick Leave Report",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"year\": 2024,\n  \"employee_id\": \"{{waiter_employee_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reports/sick-leave",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reports",
								"sick-leave"
							]
						},
						"description": "# Sick Leave Report (NY State Compliance)\n\n**NY State Law**:\n- 1 hour of sick leave per 30 hours worked\n- Maximum 40 hours per year\n- Must be tracked and reported\n\n**Report Shows**:\n- Hours accrued\n- Hours used\n- Hours remaining\n- Accrual rate\n- Compliance status"
					},
					"response": []
				},
				{
					"name": "8.4 Time Summary Report",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"start_date\": \"2024-01-01\",\n  \"end_date\": \"2024-01-31\",\n  \"group_by\": \"employee\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/reports/time-summary",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reports",
								"time-summary"
							]
						},
						"description": "Time summary report.\n\n**Group By**:\n- `employee` - By employee\n- `day` - By day\n- `week` - By week\n- `department` - By department"
					},
					"response": []
				},
				{
					"name": "8.5 Break Compliance Alerts",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/break-compliance/alerts?status=pending",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"break-compliance",
								"alerts"
							],
							"query": [
								{
									"key": "status",
									"value": "pending",
									"description": "pending/resolved/all"
								}
							]
						},
						"description": "# Break Compliance Alerts (NY State)\n\n**NY State Law**:\n- 30-minute break required for 8+ hour shifts\n- Must be tracked\n- Violations must be addressed\n\n**Alert Types**:\n- Missing break (worked 8+ hours without break)\n- Short break (less than 30 minutes)\n- Late break (taken too late in shift)\n\n**Status**:\n- `pending` - Needs resolution\n- `resolved` - Addressed\n- `all` - All alerts"
					},
					"response": []
				},
				{
					"name": "8.6 Break Compliance Dashboard",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/break-compliance/dashboard",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"break-compliance",
								"dashboard"
							]
						},
						"description": "Break compliance dashboard with statistics and trends."
					},
					"response": []
				},
				{
					"name": "8.7 Quick Stats",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/reports/quick-stats",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reports",
								"quick-stats"
							]
						},
						"description": "Quick dashboard statistics.\n\n**Returns**:\n- Active employees count\n- Current month payroll totals\n- Pending items\n- Compliance alerts"
					},
					"response": []
				}
			],
			"description": "# Reports & Compliance\n\nComprehensive reporting for NY State compliance.\n\n**Features**:\n- Attendance tracking\n- Payroll summaries\n- Sick leave tracking (NY State)\n- Break compliance (NY State)\n- Time summaries\n- Quick stats dashboard"
		},
		{
			"name": "9. Pay Rates & Configuration",
			"item": [
				{
					"name": "9.1 Create Pay Rate",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"employee_id\": \"{{waiter_employee_id}}\",\n  \"regular_rate\": 10.00,\n  \"overtime_rate\": 15.00,\n  \"overtime_threshold\": 40.00,\n  \"spread_hours_enabled\": true,\n  \"spread_hours_threshold\": 10.00,\n  \"spread_hours_rate\": 15.00,\n  \"break_compliance_enabled\": true,\n  \"break_threshold_hours\": 8.00,\n  \"required_break_minutes\": 30,\n  \"effective_date\": \"2024-01-01\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/pay-rates/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"pay-rates",
								""
							]
						},
						"description": "# Create Pay Rate Configuration\n\nConfigure custom pay rates and compliance settings.\n\n**Fields**:\n- `employee_id` (required)\n- `regular_rate` (required) - Base hourly rate\n  - **Note**: For tipped employees, use cash wage ($10)\n- `overtime_rate` (required) - Usually 1.5x regular\n- `overtime_threshold` (optional) - Default: 40 hours\n- `spread_hours_enabled` (optional) - NY State spread of hours\n- `spread_hours_threshold` (optional) - Default: 10 hours\n- `spread_hours_rate` (optional) - Extra pay rate\n- `break_compliance_enabled` (optional) - Track breaks\n- `break_threshold_hours` (optional) - Default: 8 hours\n- `required_break_minutes` (optional) - Default: 30 minutes\n- `effective_date` (required)\n\n**Spread of Hours (NY State)**:\nIf employee works 10+ hours in a day, they receive extra hour of pay at minimum wage.\n\n**Break Compliance (NY State)**:\n30-minute break required for 8+ hour shifts."
					},
					"response": []
				},
				{
					"name": "9.2 Get Employee Current Pay Rate",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/pay-rates/employee/{{waiter_employee_id}}/current",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"pay-rates",
								"employee",
								"{{waiter_employee_id}}",
								"current"
							]
						},
						"description": "Get current active pay rate configuration for employee."
					},
					"response": []
				},
				{
					"name": "9.3 Get Employee Pay Rate History",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/pay-rates/employee/{{waiter_employee_id}}/all",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"pay-rates",
								"employee",
								"{{waiter_employee_id}}",
								"all"
							]
						},
						"description": "Get complete pay rate history for employee including past rates."
					},
					"response": []
				},
				{
					"name": "9.4 Get Pay Rate Summary",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/pay-rates/employee/{{waiter_employee_id}}/summary",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"pay-rates",
								"employee",
								"{{waiter_employee_id}}",
								"summary"
							]
						},
						"description": "Get pay rate summary with statistics and compliance info."
					},
					"response": []
				},
				{
					"name": "9.5 List All Pay Rates",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/pay-rates/?active_only=true",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"pay-rates",
								""
							],
							"query": [
								{
									"key": "active_only",
									"value": "true",
									"description": "Filter only active rates"
								}
							]
						},
						"description": "List all pay rates for current business."
					},
					"response": []
				},
				{
					"name": "9.6 Update Pay Rate",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"regular_rate\": 10.50,\n  \"overtime_rate\": 15.75\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/pay-rates/{{pay_rate_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"pay-rates",
								"{{pay_rate_id}}"
							]
						},
						"description": "Update pay rate configuration.\n\nOnly send fields that need updating."
					},
					"response": []
				}
			],
			"description": "# Pay Rates & Configuration\n\nManage pay rates, overtime, and NY State compliance settings.\n\n**Features**:\n- Custom pay rates per employee\n- Overtime configuration\n- Spread of hours (NY State)\n- Break compliance tracking\n- Rate history\n- Audit trail"
		},
		{
			"name": "10. Sick Leave Management",
			"item": [
				{
					"name": "10.1 Get Sick Leave Summary",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/sick-leave/summary/{{waiter_employee_code}}?year=2024",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"sick-leave",
								"summary",
								"{{waiter_employee_code}}"
							],
							"query": [
								{
									"key": "year",
									"value": "2024"
								}
							]
						},
						"description": "# Get Sick Leave Summary (NY State Compliance)\n\n**NY State Law**:\n- Employees accrue 1 hour of sick leave per 30 hours worked\n- Maximum 40 hours per year\n- Must be tracked\n\n**Summary Shows**:\n- Hours accrued\n- Hours used\n- Hours remaining\n- Accrual rate\n- Year-to-date totals"
					},
					"response": []
				},
				{
					"name": "10.2 Request Sick Leave Usage",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"employee_code\": \"{{waiter_employee_code}}\",\n  \"usage_date\": \"2024-01-15\",\n  \"hours_used\": 8.0,\n  \"reason\": \"Flu symptoms\",\n  \"requires_approval\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/sick-leave/usage",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"sick-leave",
								"usage"
							]
						},
						"description": "Request to use sick leave hours.\n\n**Fields**:\n- `employee_code` (required)\n- `usage_date` (required)\n- `hours_used` (required)\n- `reason` (optional)\n- `requires_approval` (optional) - Default: false"
					},
					"response": []
				},
				{
					"name": "10.3 Get Pending Sick Leave Requests",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/sick-leave/usage/pending",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"sick-leave",
								"usage",
								"pending"
							]
						},
						"description": "Get all pending sick leave requests requiring approval."
					},
					"response": []
				},
				{
					"name": "10.4 Approve Sick Leave Request",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"approved_by\": \"{{manager_employee_code}}\",\n  \"approval_notes\": \"Approved - get well soon\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/sick-leave/usage/{{usage_id}}/approve",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"sick-leave",
								"usage",
								"{{usage_id}}",
								"approve"
							]
						},
						"description": "Approve sick leave request."
					},
					"response": []
				},
				{
					"name": "10.5 Accumulate Sick Leave (All Employees)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"payroll_id\": \"{{payroll_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/sick-leave/accumulate-all",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"sick-leave",
								"accumulate-all"
							]
						},
						"description": "# Accumulate Sick Leave for All Employees\n\nAutomatically calculates and accrues sick leave based on hours worked.\n\n**NY State Formula**:\n- 1 hour sick leave per 30 hours worked\n- Maximum 40 hours per year\n\n**Process**:\n1. Gets hours from payroll\n2. Calculates accrual (hours / 30)\n3. Updates sick leave balance\n4. Respects 40-hour annual cap"
					},
					"response": []
				}
			],
			"description": "# Sick Leave Management\n\nNY State sick leave compliance tracking.\n\n**Features**:\n- Automatic accrual (1hr per 30hrs worked)\n- 40-hour annual cap\n- Usage tracking\n- Approval workflow\n- Compliance reporting"
		},
		{
			"name": "11. Tip Credit Configuration",
			"item": [
				{
					"name": "11.1 Get Current Tip Credit Config",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    var config = jsonData.config;",
									"    ",
									"    console.log(\"‚úÖ Configuraci√≥n vigente obtenida\");",
									"    console.log(\"üìã Nombre:\", config.config_name);",
									"    console.log(\"üí∞ Salario m√≠nimo:\", config.minimum_wage);",
									"    console.log(\"üíµ Cash wage:\", config.cash_wage);",
									"    console.log(\"üí≥ Tip credit:\", config.tip_credit_amount);",
									"    console.log(\"üìÖ Vigente desde:\", config.effective_date);",
									"    console.log(\"üåê Fuente:\", jsonData.is_global ? 'Sistema Global' : 'Configuraci√≥n del Tenant');",
									"} else {",
									"    console.log(\"‚ùå Error:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/tip-credit/current",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"tip-credit",
								"current"
							]
						},
						"description": "# Get Current Tip Credit Configuration\n\n**Purpose**: Obtiene la configuraci√≥n de tip credit vigente para el tenant.\n\n**L√≥gica**:\n1. Busca configuraci√≥n espec√≠fica del tenant\n2. Si no existe, usa configuraci√≥n global del sistema\n3. Filtra por fecha de vigencia\n\n**Response**:\n```json\n{\n  \"config\": {\n    \"id\": \"uuid\",\n    \"config_name\": \"NY State - 2025\",\n    \"state\": \"NY\",\n    \"minimum_wage\": 16.50,\n    \"cash_wage\": 11.00,\n    \"tip_credit_amount\": 5.50,\n    \"effective_date\": \"2025-01-01\",\n    \"is_active\": true\n  },\n  \"is_global\": true,\n  \"source\": \"system\"\n}\n```\n\n**Use Cases**:\n- Verificar valores actuales antes de calcular n√≥mina\n- Mostrar en interfaz para transparencia\n- Auditor√≠a de configuraci√≥n"
					},
					"response": []
				},
				{
					"name": "11.2 List All Tip Credit Configs",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/tip-credit/?include_global=true&active_only=true",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"tip-credit",
								""
							],
							"query": [
								{
									"key": "include_global",
									"value": "true",
									"description": "Incluir configuraci√≥n global del sistema"
								},
								{
									"key": "active_only",
									"value": "true",
									"description": "Solo configuraciones activas"
								}
							]
						},
						"description": "# List Tip Credit Configurations\n\n**Purpose**: Lista todas las configuraciones disponibles.\n\n**Query Parameters**:\n- `include_global` (default: true) - Incluir configs del sistema\n- `active_only` (default: true) - Solo activas\n\n**Returns**:\n- Configuraciones del tenant\n- Configuraciones globales (si include_global=true)\n- Historial completo (si active_only=false)"
					},
					"response": []
				},
				{
					"name": "11.3 Create Tenant Tip Credit Config",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"tip_config_id\", jsonData.id);",
									"    ",
									"    console.log(\"‚úÖ Configuraci√≥n creada\");",
									"    console.log(\"üÜî Config ID:\", jsonData.id);",
									"    console.log(\"üí∞ Valores:\", jsonData.minimum_wage, \"/\", jsonData.cash_wage, \"/\", jsonData.tip_credit_amount);",
									"} else {",
									"    console.log(\"‚ùå Error:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"config_name\": \"Mi Restaurante - Custom Config\",\n  \"state\": \"NY\",\n  \"city\": \"Queens\",\n  \"minimum_wage\": 16.50,\n  \"cash_wage\": 11.00,\n  \"tip_credit_amount\": 5.50,\n  \"effective_date\": \"2025-11-03\",\n  \"notes\": \"Configuraci√≥n personalizada para mi negocio\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/tip-credit/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"tip-credit",
								""
							]
						},
						"description": "# Create Tenant Tip Credit Config\n\n**Purpose**: Crear configuraci√≥n personalizada para tu negocio.\n\n**‚ö†Ô∏è IMPORTANTE**:\n- Sobrescribe la configuraci√≥n global del sistema\n- Solo aplica a tu tenant\n- Permite adaptar a leyes locales espec√≠ficas\n\n**Validation**:\n- `cash_wage + tip_credit_amount` DEBE = `minimum_wage`\n- Todos los valores > 0\n\n**Fields**:\n- `config_name` (required) - Nombre descriptivo\n- `state` (required) - C√≥digo de estado (NY, CA, etc)\n- `city` (optional) - Ciudad espec√≠fica\n- `minimum_wage` (required) - Ej: 16.50\n- `cash_wage` (required) - Ej: 11.00\n- `tip_credit_amount` (required) - Ej: 5.50\n- `effective_date` (required) - Fecha inicio YYYY-MM-DD\n- `end_date` (optional) - Fecha fin\n- `notes` (optional) - Notas\n\n**Auto-saved**: `tip_config_id`"
					},
					"response": []
				},
				{
					"name": "11.4 Create System Config (Super Admin Only)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{super_admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"config_name\": \"NY State - 2026 (Proyecci√≥n)\",\n  \"state\": \"NY\",\n  \"minimum_wage\": 17.00,\n  \"cash_wage\": 11.50,\n  \"tip_credit_amount\": 5.50,\n  \"effective_date\": \"2026-01-01\",\n  \"notes\": \"Proyecci√≥n estimada para 2026 - actualizar con valores oficiales cuando se publiquen\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/tip-credit/system",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"tip-credit",
								"system"
							]
						},
						"description": "# Create Global System Config\n\n**‚ö†Ô∏è SUPER ADMIN ONLY**\n\n**Purpose**: Crear configuraci√≥n global que aplica a TODOS los tenants.\n\n**Use Cases**:\n- Actualizar cuando cambian leyes estatales\n- Agregar configuraciones futuras\n- Mantener historial de cambios legales\n\n**Example - Preparar para cambio de ley 2026**:\n```json\n{\n  \"config_name\": \"NY State - 2026\",\n  \"minimum_wage\": 17.00,\n  \"cash_wage\": 11.50,\n  \"tip_credit_amount\": 5.50,\n  \"effective_date\": \"2026-01-01\"\n}\n```\n\nEl sistema autom√°ticamente usar√° esta config desde el 2026-01-01."
					},
					"response": []
				},
				{
					"name": "11.5 Calculate Tip Credit Shortfall",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    console.log(\"‚úÖ C√°lculo de shortfall completado\");",
									"    console.log(\"‚è∞ Horas trabajadas:\", pm.request.url.query.get('hours_worked'));",
									"    console.log(\"üí∞ Propinas requeridas: $\" + jsonData.tips_required);",
									"    console.log(\"üíµ Propinas reportadas: $\" + jsonData.tips_reported);",
									"    console.log(\"‚ö†Ô∏è Shortfall (faltante): $\" + jsonData.shortfall);",
									"    console.log(\"\");",
									"    console.log(\"üìä Config usada:\", jsonData.config_used.config_name || 'Default');",
									"    console.log(\"   Salario m√≠nimo: $\" + jsonData.config_used.minimum_wage);",
									"    console.log(\"   Cash wage: $\" + jsonData.config_used.cash_wage);",
									"    console.log(\"   Tip credit: $\" + jsonData.config_used.tip_credit_amount);",
									"} else {",
									"    console.log(\"‚ùå Error:\", pm.response.text());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/tip-credit/calculate-shortfall?hours_worked=40&tips_reported=150.00",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"tip-credit",
								"calculate-shortfall"
							],
							"query": [
								{
									"key": "hours_worked",
									"value": "40",
									"description": "Horas trabajadas en el per√≠odo"
								},
								{
									"key": "tips_reported",
									"value": "150.00",
									"description": "Total de propinas reportadas"
								},
								{
									"key": "work_date",
									"value": "",
									"description": "Fecha de trabajo (opcional, default: hoy)",
									"disabled": true
								}
							]
						},
						"description": "# Calculate Tip Credit Shortfall\n\n**Purpose**: Calcular el faltante de tip credit ANTES de procesar n√≥mina.\n\n**Ejemplo - C√°lculo Diario**:\n```\nEmpleado trabaja 8 horas el Lunes:\n  ‚Üí Propinas requeridas: 8 √ó $5.50 = $44.00\n  ‚Üí Propinas reportadas: $30.00\n  ‚Üí Shortfall: $14.00 (el empleador debe pagar esto)\n```\n\n**Ejemplo - C√°lculo Semanal**:\n```\nEmpleado trabaja 40 horas en la semana:\n  ‚Üí Propinas requeridas: 40 √ó $5.50 = $220.00\n  ‚Üí Propinas reportadas: $150.00\n  ‚Üí Shortfall: $70.00 (el empleador debe pagar esto)\n\nPago total al empleado:\n  ‚Üí Cash wage: 40 √ó $11.00 = $440.00\n  ‚Üí Shortfall compensation: $70.00\n  ‚Üí Propinas: $150.00\n  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n  ‚Üí TOTAL: $660.00\n```\n\n**Query Parameters**:\n- `hours_worked` (required) - Decimal\n- `tips_reported` (required) - Decimal\n- `work_date` (optional) - YYYY-MM-DD (default: hoy)\n\n**Response**:\n```json\n{\n  \"tips_required\": 220.00,\n  \"tips_reported\": 150.00,\n  \"shortfall\": 70.00,\n  \"config_used\": {\n    \"minimum_wage\": 16.50,\n    \"cash_wage\": 11.00,\n    \"tip_credit_amount\": 5.50,\n    \"effective_date\": \"2025-01-01\"\n  }\n}\n```\n\n**Use Cases**:\n1. Verificar c√°lculo antes de procesar n√≥mina\n2. Informar a empleado cu√°nto debe reportar\n3. Auditar compliance\n4. Proyectar costos"
					},
					"response": []
				},
				{
					"name": "11.6 Update Tip Credit Config",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"notes\": \"Actualizado para reflejar nueva ordenanza local\",\n  \"end_date\": \"2025-12-31\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/tip-credit/{{tip_config_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"tip-credit",
								"{{tip_config_id}}"
							]
						},
						"description": "# Update Tip Credit Config\n\n**Purpose**: Actualizar configuraci√≥n existente.\n\n**Updatable Fields**:\n- `config_name`\n- `minimum_wage`\n- `cash_wage`\n- `tip_credit_amount`\n- `minimum_tips_threshold`\n- `end_date`\n- `notes`\n- `is_active`\n\n**Note**: Solo enviar campos a actualizar."
					},
					"response": []
				},
				{
					"name": "11.7 Deactivate Config",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/tip-credit/{{tip_config_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"tip-credit",
								"{{tip_config_id}}"
							]
						},
						"description": "# Deactivate Tip Credit Config\n\n**Purpose**: Desactivar configuraci√≥n.\n\n**Important**:\n- No elimina, solo marca como inactiva\n- Establece end_date = hoy\n- Mantiene historial para auditor√≠a"
					},
					"response": []
				}
			],
			"description": "# Tip Credit Configuration\n\n## üéØ Sistema Configurable de Tip Credit (NY State)\n\n**¬øPor qu√© es importante?**\n\nLas leyes de salario m√≠nimo y tip credit cambian frecuentemente:\n- **2024**: M√≠nimo $15.00, Cash wage $10.00, Tip credit $5.00\n- **2025**: M√≠nimo $16.50, Cash wage $11.00, Tip credit $5.50\n- **2026**: ¬ø? (a√∫n no publicado)\n\n**Problema antes**: Hab√≠a que modificar c√≥digo cada vez que cambiaba la ley.\n\n**Soluci√≥n ahora**: Configuraci√≥n din√°mica en base de datos.\n\n---\n\n## üìä C√≥mo Funciona:\n\n### **Nivel 1: Configuraci√≥n Global (Sistema)**\n- Super Admin crea configs globales para NY State\n- Todos los tenants usan esta config por defecto\n- Se actualiza cuando cambian las leyes estatales\n\n### **Nivel 2: Configuraci√≥n por Tenant**\n- Cada negocio puede crear su propia config\n- Sobrescribe la global solo para ese negocio\n- √ötil para ciudades con leyes diferentes\n\n### **Nivel 3: Vigencias Autom√°ticas**\n- Configs tienen `effective_date` y `end_date`\n- Sistema usa autom√°ticamente la config vigente seg√∫n fecha\n- Permite programar cambios futuros\n\n---\n\n## üí° Ejemplos de Uso:\n\n### **Escenario 1: Negocio normal en NY**\n```\n1. No hace nada\n2. Sistema usa config global de NY 2025 autom√°ticamente\n3. Valores: $16.50 / $11.00 / $5.50\n```\n\n### **Escenario 2: Negocio en NYC (salario mayor)**\n```\n1. Business crea su config:\n   - minimum_wage: 18.00\n   - cash_wage: 12.00\n   - tip_credit_amount: 6.00\n2. Sistema usa ESTA config en lugar de la global\n```\n\n### **Escenario 3: Cambio de ley en 2026**\n```\n1. Super Admin crea nueva config global:\n   - effective_date: 2026-01-01\n   - minimum_wage: 17.50\n2. TODOS los tenants usan autom√°ticamente\n   los nuevos valores desde 2026-01-01\n3. Sin tocar c√≥digo\n```\n\n---\n\n## üî• Ventajas:\n\n‚úÖ **Zero Code Changes**: Cuando cambian leyes, solo actualizar DB\n‚úÖ **Multi-Jurisdicci√≥n**: Cada negocio puede tener sus valores\n‚úÖ **Historial Completo**: Auditable y trazable\n‚úÖ **Cambios Programados**: Set future configs con effective_date\n‚úÖ **Fallback Seguro**: Si no hay config, usa defaults\n‚úÖ **Transparente**: Empleados pueden ver config vigente\n\n---\n\n## üìã Flujo Recomendado:\n\n**1. Al inicio del a√±o:**\n- Super Admin verifica si hay cambios en la ley\n- Crea nueva config global si es necesario\n- effective_date = fecha del cambio\n\n**2. Durante operaci√≥n normal:**\n- Sistema usa autom√°ticamente config vigente\n- Negocios crean configs propias solo si necesitan valores diferentes\n\n**3. Al calcular n√≥mina:**\n- Sistema busca config vigente para la fecha\n- Usa valores correctos autom√°ticamente\n- Muestra en PDF qu√© config se us√≥ (transparencia)\n\n---\n\n## üéØ API Endpoints:\n\n1. **GET /current** - Ver config vigente ahora\n2. **GET /** - Listar todas las configs (incluye historial)\n3. **POST /** - Crear config para tu negocio (Business)\n4. **POST /system** - Crear config global (Super Admin)\n5. **PUT /{id}** - Actualizar config\n6. **DELETE /{id}** - Desactivar config\n7. **POST /calculate-shortfall** - Calculadora de shortfall"
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		}
	]
}